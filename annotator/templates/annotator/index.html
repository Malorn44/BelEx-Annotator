{% load render_table from django_tables2 %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'annotator/style.css' %}">

<script type="text/javascript">
	window.addEventListener('load',function() {
    	if(localStorage.getItem('scrollPosition') !== null)
       		window.scrollTo(0, localStorage.getItem('scrollPosition'));
	},false);

	function storeScrollPos() {
		localStorage.setItem('scrollPosition', window.scrollY)
	}
	function storeScrollTop() {
		localStorage.setItem('scrollPosition', 0)
	}
</script>

<div>
	<form action="change_view" method="post" onsubmit="storeScrollTop()">
	    {% csrf_token %}
		<a class="btn btn-light" href="{% url 'annotator:home' %}">Back Home</a> 
		<label> Sentence Index </label>
		<input type="number" id="sindex" name="sindex" placeholder={{entry_pk}} min=1 max={{num_entries}} required>
		<input class="btn btn-light" type="submit" value="Go">
		<a class="btn btn-light" href="{% url 'annotator:index' entry.eID|add:-1 %}"> &#8249;</a>
		<a class="btn btn-light" href="{% url 'annotator:index' entry.eID|add:1 %}"> &#8250;</a>
	</form>

	
	{% include "annotator/export_button.html" %}
	<button class="btn btn-circle btn-lg top-right" onclick="alert('Export Annotations only exports those that are verified.\nAnnotations entered manually and those that are uploaded via the form on the Home page are automatically verified.\nYou can verify an annotation by clicking the Verify button or by clicking the Modify button and re-submitting.\nAnnotations you don\'t want can be removed with the Delete button.');"><i class="fa fa-question-circle"></i></button>
</div>

<div>
	<form method="post" class="top-right" onsubmit="storeScrollPos()">
		{% csrf_token %}
		<button class="btn btn-primary" name="_openIE_copy"> <i class='fa fa-copy'></i> Add OpenIE as Belief Extractions </button>
	</form>

	<h2> OpenIE Extractions </h2> 
</div>

<div class="extractions">
	{% for ext in entry.extraction_set.all %}
		<span class="unselectable"> {{ forloop.counter }}) </span> 
		<span class="subject yellow-select"> {{ ext.sub_text }} </span> 
		<span class="predicate yellow-select"> {{ ext.pred_text }} </span>
		{% for arg in ext.extargument_set.all %}
			<span class="argument yellow-select"> {{ arg.arg_text }} </span>
		{% endfor %}
		<br>
	{% endfor %}
</div>

<div>
	<form method="post" onsubmit="storeScrollPos()">
	    {% csrf_token %}
	    {{ form }}
    	<input class="btn btn-primary" type="submit" name="_submit_annotation" value="Submit">
	</form>
</div>

<!-- <form method="post" onsubmit="store()">
	{% csrf_token %}
	<input class="btn btn-primary" type="submit" name="dddd" value="Test">
</form> -->


<div class="table">
	{% if num_annotations > 0 %}
		{% include "annotator/annotation_table.html" %}
		<!-- {% render_table table %} -->
	{% endif %}
</div>


	